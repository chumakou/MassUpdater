# MassUpdater

<p><b>MassUpdater</b> is a simple command-line tool designed for the bulk updating of text files with similar structures, such as configuration files, source code, and documents.</P> 
<p>Rather than manually modifying numerous files (or a single large file with repeated elements), consolidate all required information into single source file (template). With MassUpdater, you can focus solely on that template file, any template modifications will automatically be reflected in all your target files. It allows to save time, enhance productivity and reduce manual errors.</p>

## Usage
```console
$ java MassUpdater.java <template>
```
Java version 11 or above required.

## Template

Template is a text file containing all information required to update (generate) your target text files. Template can contain comments, text variables, <i>foreach</i> variable (see below), and commands. 

#### Comments examples: 
```
<!-- this is a comment-->
# this is also comment
' comment 1
-- comment2
/* comment 3 */
// comment 4
```
All comments are single line only.

#### Text variables
Text variables can be single-line or multi-line. Multi-line variables are marked by double curly brackets. Variables can include another variables, for example: 

```xml
<!-- let's define "city" and "country" variables-->
city = New York
country = USA
<!-- "location" variable includes "city" and "country" variables -->
location = <%city%>, <%country%>
<!-- htmltext is a multiline variable: -->
htmltext ={{
  <html>
  <title>Some information about <%location%></title>
  <body><%city%> is a beautiful city. <%city%> is located in the <%country%></body>
  </html>
}}
```
Resolving of variables is carried out from top to bottom.<br>
Is it possible to insert variable text in upper case, for example:
``` location = <%CITY%> ```. In this case location variable will contain uppercase city name.


#### Foreach variables

Some variables can contain multiple values. Such variables should start with <b>foreach</b> keyword and contain comma-separated list of values, for example:
```xml
foreach city = New York,Washington,Los-Angeles,Paris,Milan
```
We can redefine some variables for particular multivalued variable values:
```xml
<!-- city is a multivalued variable-->
foreach city = New York,Los-Angeles,Paris,Washington,Milan,Rome

<!-- country by default-->
country = USA

<!-- redefine country for some cities-->
country.Paris = France
country.Milan = France
country.Rome = Italy
```
MassUpdater will execute the script for each value within multivalued varables. So it's similar to for-each loops in programming languages.

#### Commands
After resolving of all variables, MassUpdater executes commands (from top to bottom). For now we can use <b>save to</b>, <b>print</b>, and <b>mkdir</b> commands. Commands are needed to save (or print) results or update target files.<br><br>
<b>save to</b> command saves generated text to a file, for example: ```save <%text%> to .\<%outputfile%>```<br><br>
<b>print</b> command prints text to console output, for example: ```print content: <%content%>```<br><br>
<b>mkdir</b> command creates directory, for example ```mkdir .\output```<br>

## Example

Let's create a MassUpdater template. Just create a text file with the name <b>index-massupdater.html</b> and put the folowing content: 
```xml
<!-- the script will be executed for each city in the list -->
foreach city = New York,Washington,Los-Angeles,Paris,Milan,Rome

<!-- country by default-->
country = USA

<!-- redefine country for some cities-->
country.Paris = France
country.Milan = France
country.Rome = Italy

<!-- for each city print to console generated html text -->
print ============
print <%city%>
print ============
print <%htmltext%>

outputfile = ./index_<%city%>.html

<!-- save html text to output file -->
save <%htmltext%> to <%outputfile%>

<!-- print diagnostic message -->
print Index file for city [<%city%>] was successfully saved to <%outputfile%>

<!-- location includes city and country variables -->
location = <%city%>, <%country%>

<!-- htmltext is a multiline variable example: -->
htmltext ={{
<html>
<title>Some information about <%location%></title>
<body><%city%> is a beautiful city. <%city%> is located in the <%country%></body>
</html>
}}
```
To run the script:
```console
$ java MassUpdater.java index-massupdater.html
```

Console output generated by <b>print</b> command:
```console
$ java MassUpdater.java example.html
============
New York
============
    <html>
    <title>Some information about New York, USA</title>
    <body>New York is a beautiful city. New York is located in the USA</body>
    </html>
index file for city [New York] was successfully saved to ./index_New York.html
============
Washington
============
    <html>
    <title>Some information about Washington, USA</title>
    <body>Washington is a beautiful city. Washington is located in the USA</body>
    </html>
index file for city [Washington] was successfully saved to ./index_Washington.html
============
Los-Angeles
============
    <html>
    <title>Some information about Los-Angeles, USA</title>
    <body>Los-Angeles is a beautiful city. Los-Angeles is located in the USA</body>
    </html>
index file for city [Los-Angeles] was successfully saved to ./index_Los-Angeles.html
============
Paris
============
    <html>
    <title>Some information about Paris, France</title>
    <body>Paris is a beautiful city. Paris is located in the France</body>
    </html>
index file for city [Paris] was successfully saved to ./index_Paris.html
============
Milan
============
    <html>
    <title>Some information about Milan, France</title>
    <body>Milan is a beautiful city. Milan is located in the France</body>
    </html>
index file for city [Milan] was successfully saved to ./index_Milan.html
============
Rome
============
    <html>
    <title>Some information about Rome, Italy</title>
    <body>Rome is a beautiful city. Rome is located in the Italy</body>
    </html>
index file for city [Rome] was successfully saved to ./index_Rome.html

```

Generated html content ("htmltext" variable) will be saved (updated) to corresponding output files by <b>save to </b>command: <br>
<i>index_Los-Angeles.html</i>,<br> 
<i>index_Milan.html</i>, <br>
<i>index_New York.html</i>, <br>
<i>index_Paris.html</i>, <br>
<i>index_Rome.html</i>, <br>
<i>index_Washington.html</i><br>
<br>




